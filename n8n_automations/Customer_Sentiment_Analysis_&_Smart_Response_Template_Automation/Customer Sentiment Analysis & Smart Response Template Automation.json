{
  "name": "My workflow 2",
  "nodes": [
    {
      "parameters": {
        "options": {}
      },
      "id": "f7d69dc8-3b95-4adb-92bb-5f1ee6321dbe",
      "name": "Zendesk New Ticket",
      "type": "n8n-nodes-base.zendeskTrigger",
      "typeVersion": 1,
      "position": [
        -1200,
        -160
      ],
      "webhookId": "zendesk-new-ticket"
    },
    {
      "parameters": {},
      "id": "5fefc6ca-4873-4290-94c3-fb09a1c8e57b",
      "name": "Gemini - Duygu Analizi",
      "type": "n8n-nodes-base.googleGemini",
      "typeVersion": 1,
      "position": [
        -1020,
        -160
      ]
    },
    {
      "parameters": {
        "jsCode": "// Gemini'den gelen JSON'Ä± parse et\nlet analysis;\ntry {\n  const geminiResponse = $input.first().json.response;\n  analysis = JSON.parse(geminiResponse);\n} catch (error) {\n  // EÄŸer JSON parse edilemezse varsayÄ±lan deÄŸerler\n  analysis = {\n    duygu: \"nÃ¶tr\",\n    nishan: \"soru\",\n    aciliyet: \"orta\",\n    kategori: \"genel\",\n    Ã¶zet: \"Analiz edilemedi\"\n  };\n}\n\n// Orijinal ticket bilgilerini de ekle\nconst ticketData = $node['Zendesk New Ticket'].json;\n\nreturn {\n  json: {\n    ticket: ticketData.ticket,\n    analysis: analysis,\n    customerEmail: ticketData.ticket.requester.email,\n    ticketId: ticketData.ticket.id,\n    subject: ticketData.ticket.subject,\n    description: ticketData.ticket.description\n  }\n};"
      },
      "id": "83ba9a42-c658-4c1b-be35-a42bba3cb339",
      "name": "Parse Analysis",
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        -640,
        -120
      ]
    },
    {
      "parameters": {
        "model": "gpt-4",
        "prompt": "=AÅŸaÄŸÄ±daki mÃ¼ÅŸteri destek talebi iÃ§in empatik ve Ã§Ã¶zÃ¼m odaklÄ± bir cevap taslaÄŸÄ± hazÄ±rla:\n\n**MÃ¼ÅŸteri Bilgileri:**\n- Email: {{ $json.customerEmail }}\n- Konu: {{ $json.subject }}\n- Mesaj: {{ $json.description }}\n\n**Analiz Sonucu:**\n- Duygu: {{ $json.analysis.duygu }}\n- NiÅŸan: {{ $json.analysis.nishan }}\n- Aciliyet: {{ $json.analysis.aciliyet }}\n- Kategori: {{ $json.analysis.kategori }}\n- Ã–zet: {{ $json.analysis.Ã¶zet }}\n\n**Cevap Kriterleri:**\n1. Duyguya uygun empati gÃ¶ster\n2. {{ $json.analysis.nishan }} tÃ¼rÃ¼ne gÃ¶re yaklaÅŸÄ±m sergile\n3. Profesyonel ama sÄ±cak ton kullan\n4. TÃ¼rkÃ§e yanÄ±tla\n5. Somut Ã§Ã¶zÃ¼m Ã¶nerileri sun\n6. Gerekirse ek bilgi/belge iste\n7. Takip sÃ¼reci hakkÄ±nda bilgi ver\n\nSadece cevap taslaÄŸÄ±nÄ± dÃ¶ndÃ¼r, baÅŸka aÃ§Ä±klama yapma.",
        "options": {
          "temperature": 0.7
        },
        "requestOptions": {}
      },
      "id": "a4ff07e1-28c6-4b23-9c8a-246fc9e38229",
      "name": "GPT-4 - Cevap TaslaÄŸÄ±",
      "type": "n8n-nodes-base.openAi",
      "typeVersion": 1,
      "position": [
        -420,
        -120
      ]
    },
    {
      "parameters": {
        "text": "=ğŸ« **Yeni Destek Talebi TaslaÄŸÄ±** - Ticket #{{ $node['Parse Analysis'].json.ticketId }}\n\n**ğŸ“§ MÃ¼ÅŸteri:** {{ $node['Parse Analysis'].json.customerEmail }}\n**ğŸ“‹ Konu:** {{ $node['Parse Analysis'].json.subject }}\n\n**ğŸ” Analiz:**\nâ€¢ Duygu: {{ $node['Parse Analysis'].json.analysis.duygu }} \nâ€¢ NiÅŸan: {{ $node['Parse Analysis'].json.analysis.nishan }}\nâ€¢ Aciliyet: {{ $node['Parse Analysis'].json.analysis.aciliyet }}\nâ€¢ Kategori: {{ $node['Parse Analysis'].json.analysis.kategori }}\n\n**ğŸ’¬ Ã–nerilen Cevap:**\n```\n{{ $node['GPT-4 - Cevap TaslaÄŸÄ±'].json.choices[0].message.content }}\n```\n\n**âš¡ Aksiyonlar:**\nâ€¢ âœ… Onayla ve gÃ¶nder\nâ€¢ âœï¸ DÃ¼zenle\nâ€¢ âŒ Reddet ve yeniden hazÄ±rla",
        "otherOptions": {}
      },
      "id": "eba0b9c7-1a5f-4fcb-9aad-8d2210572630",
      "name": "Slack - Taslak Bildirimi",
      "type": "n8n-nodes-base.slack",
      "typeVersion": 2,
      "position": [
        -200,
        -120
      ],
      "webhookId": "c2d37c83-9bf8-4464-94ba-56f36f8cb332"
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict"
          },
          "conditions": [
            {
              "id": "approval-check",
              "leftValue": "={{ $json.action }}",
              "rightValue": "approve",
              "operator": {
                "type": "string",
                "operation": "equals"
              }
            }
          ],
          "combinator": "and"
        },
        "options": {}
      },
      "id": "9dd19069-37e9-45f8-80e5-ce650e6b869c",
      "name": "Onay KontrolÃ¼",
      "type": "n8n-nodes-base.if",
      "typeVersion": 2,
      "position": [
        20,
        -120
      ]
    },
    {
      "parameters": {
        "additionalFields": {}
      },
      "id": "5e4bd1bd-6b07-4796-b1fa-5942ca0b3173",
      "name": "Zendesk - OnaylanmÄ±ÅŸ Cevap",
      "type": "n8n-nodes-base.zendesk",
      "typeVersion": 1,
      "position": [
        500,
        -200
      ]
    },
    {
      "parameters": {
        "text": "=âŒ **Taslak Reddedildi** - Ticket #{{ $node['Parse Analysis'].json.ticketId }}\n\nYeniden iÅŸleme alÄ±nÄ±yor...",
        "otherOptions": {}
      },
      "id": "526b6aca-20b2-4209-9d18-8bad57a8b9c8",
      "name": "Slack - Red Bildirimi",
      "type": "n8n-nodes-base.slack",
      "typeVersion": 2,
      "position": [
        240,
        260
      ],
      "webhookId": "267195a5-723b-4a4e-8391-7be6ba36b618"
    },
    {
      "parameters": {
        "model": "gpt-4",
        "prompt": "=Ã–nceki taslak reddedildi. Daha iyi bir cevap hazÄ±rla:\n\n**MÃ¼ÅŸteri Talebi:**\n{{ $node['Parse Analysis'].json.description }}\n\n**Analiz:**\n- Duygu: {{ $node['Parse Analysis'].json.analysis.duygu }}\n- NiÅŸan: {{ $node['Parse Analysis'].json.analysis.nishan }}\n- Aciliyet: {{ $node['Parse Analysis'].json.analysis.aciliyet }}\n\n**Yeni Taslak Kriterleri:**\n- Daha kiÅŸisel ve empati yoÄŸun yaklaÅŸÄ±m\n- Somut Ã§Ã¶zÃ¼m adÄ±mlarÄ±\n- Net zaman Ã§erÃ§eveleri\n- Ek destek kanallarÄ± Ã¶nerisi\n\nSadece revize edilmiÅŸ cevap taslaÄŸÄ±nÄ± dÃ¶ndÃ¼r.",
        "options": {
          "temperature": 0.8
        },
        "requestOptions": {}
      },
      "id": "0da1ec25-ee89-400d-8c5b-55886a1feff5",
      "name": "GPT-4 - Revize Taslak",
      "type": "n8n-nodes-base.openAi",
      "typeVersion": 1,
      "position": [
        500,
        260
      ]
    },
    {
      "parameters": {
        "text": "=ğŸ”„ **Revize EdilmiÅŸ Taslak** - Ticket #{{ $node['Parse Analysis'].json.ticketId }}\n\n**ğŸ’¬ Yeni Ã–nerilen Cevap:**\n```\n{{ $node['GPT-4 - Revize Taslak'].json.choices[0].message.content }}\n```\n\n**âš¡ Aksiyonlar:**\nâ€¢ âœ… Onayla ve gÃ¶nder\nâ€¢ âœï¸ Manuel dÃ¼zenle\nâ€¢ ğŸ”„ Tekrar revize et",
        "otherOptions": {}
      },
      "id": "c709cfc5-de04-4824-a1b2-bea0c8b0e4fe",
      "name": "Slack - Revize Bildirimi",
      "type": "n8n-nodes-base.slack",
      "typeVersion": 2,
      "position": [
        740,
        260
      ],
      "webhookId": "608196c0-0ca8-4c48-8367-40fa6bdbb60a"
    },
    {
      "parameters": {
        "text": "=âœ… **Cevap GÃ¶nderildi** - Ticket #{{ $node['Parse Analysis'].json.ticketId }}\n\n{{ $node['Parse Analysis'].json.customerEmail }} adresine cevap baÅŸarÄ±yla iletildi.\n\nğŸ“Š **Ä°statistikler:**\nâ€¢ Ä°ÅŸlem SÃ¼resi: {{ Math.round((Date.now() - Date.parse($node['Zendesk New Ticket'].json.ticket.created_at)) / 1000 / 60) }} dakika\nâ€¢ Duygu: {{ $node['Parse Analysis'].json.analysis.duygu }}\nâ€¢ Kategori: {{ $node['Parse Analysis'].json.analysis.kategori }}",
        "otherOptions": {}
      },
      "id": "db8d6aec-ba3b-47ca-9c56-c1b6a86866df",
      "name": "Slack - BaÅŸarÄ± Bildirimi",
      "type": "n8n-nodes-base.slack",
      "typeVersion": 2,
      "position": [
        740,
        -220
      ],
      "webhookId": "22dbb0aa-aa3c-4ba1-9ccf-c2b415461f0d"
    },
    {
      "parameters": {
        "httpMethod": "POST",
        "path": "approval-action",
        "options": {}
      },
      "id": "bf2502b4-6244-4367-8066-383a62db307c",
      "name": "Webhook - Onay Sistemi",
      "type": "n8n-nodes-base.webhook",
      "typeVersion": 1,
      "position": [
        -200,
        80
      ],
      "webhookId": "1dc67364-7d01-45ac-918c-3f0e27ba9c52"
    },
    {
      "parameters": {
        "jsCode": "// Webhook'den gelen onay/red durumunu iÅŸle\nconst webhookData = $input.first().json;\nconst action = webhookData.action; // 'approve' veya 'reject'\nconst ticketId = webhookData.ticketId;\nconst comment = webhookData.comment || '';\n\n// Orijinal ticket verisini bul\nconst originalData = $node['Parse Analysis'].json;\n\nreturn {\n  json: {\n    action: action,\n    ticketId: ticketId,\n    comment: comment,\n    ...originalData\n  }\n};"
      },
      "id": "fe531d53-2188-4c75-b5ba-7af6a3cc4f41",
      "name": "Process Approval",
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        -200,
        180
      ]
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict"
          },
          "conditions": [
            {
              "id": "high-priority-check",
              "leftValue": "={{ $node['Parse Analysis'].json.analysis.aciliyet }}",
              "rightValue": "yÃ¼ksek",
              "operator": {
                "type": "string",
                "operation": "equals"
              }
            },
            {
              "id": "negative-sentiment",
              "leftValue": "={{ $node['Parse Analysis'].json.analysis.duygu }}",
              "rightValue": "negatif",
              "operator": {
                "type": "string",
                "operation": "equals"
              }
            }
          ],
          "combinator": "or"
        },
        "options": {}
      },
      "id": "fe58de25-deaf-4f0a-ac90-2bcd2b78d6cd",
      "name": "Ã–ncelik KontrolÃ¼",
      "type": "n8n-nodes-base.if",
      "typeVersion": 2,
      "position": [
        -420,
        80
      ]
    },
    {
      "parameters": {
        "text": "=ğŸš¨ **ACÄ°L DESTEK TALEBÄ°** - Ticket #{{ $node['Parse Analysis'].json.ticketId }}\n\n**âš ï¸ Durum:** YÃ¼ksek Ã¶ncelikli/Negatif duygu\n**ğŸ“§ MÃ¼ÅŸteri:** {{ $node['Parse Analysis'].json.customerEmail }}\n**ğŸ“‹ Konu:** {{ $node['Parse Analysis'].json.subject }}\n\n**ğŸ” Analiz:**\nâ€¢ Duygu: {{ $node['Parse Analysis'].json.analysis.duygu }}\nâ€¢ Aciliyet: {{ $node['Parse Analysis'].json.analysis.aciliyet }}\nâ€¢ Ã–zet: {{ $node['Parse Analysis'].json.analysis.Ã¶zet }}\n\n@channel LÃ¼tfen derhal mÃ¼dahale edin!",
        "otherOptions": {}
      },
      "id": "5c43a15b-d36b-4aeb-b687-e36e86bf9776",
      "name": "Slack - Acil Bildirim",
      "type": "n8n-nodes-base.slack",
      "typeVersion": 2,
      "position": [
        -200,
        280
      ],
      "webhookId": "a63038d2-beee-4d1c-a920-3d2b90fd8314"
    },
    {
      "parameters": {
        "content": "## MÃ¼ÅŸteri YanÄ±t giriÅŸi\nBu kÄ±sÄ±mda mÃ¼ÅŸterilerinizden gelen yanÄ±tlarÄ±\nyapay zekaya baÄŸlayacaksÄ±nÄ±z\n",
        "height": 260,
        "width": 400
      },
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        -1220,
        -280
      ],
      "id": "36f398b6-6de8-4d42-84ba-9093c72672bc",
      "name": "Sticky Note"
    },
    {
      "parameters": {
        "content": "## Reddedildi !!!\nOnaylanmamÄ±ÅŸ bir cevap olursa yada konuÅŸmanÄ±n revize edilmesi gerekirse\nSlack Ã¼zerinden revize bildirimi ile kayÄ±t etme imkanÄ±\n",
        "height": 240,
        "width": 680,
        "color": 3
      },
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        220,
        140
      ],
      "id": "fe7bb4bc-320a-4301-a35e-4013c890612f",
      "name": "Sticky Note1"
    },
    {
      "parameters": {
        "content": "## OnaylandÄ±!!!\nOnaylanmÄ±ÅŸ bir cevap olursa yada konuÅŸma biterse\nSlack Ã¼zerinden baÅŸarÄ± bildirimi ile kayÄ±t imkanÄ±\n",
        "height": 280,
        "width": 480,
        "color": 4
      },
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        380,
        -340
      ],
      "id": "9cf1b48d-74b4-47c9-9333-39ac77ea6fa1",
      "name": "Sticky Note2"
    },
    {
      "parameters": {
        "content": "## MÃ¼ÅŸteriye Cevap Verme KÄ±smÄ±\nMuÅŸteriyeden gelen cevabÄ± deÄŸerlendirip\nCevap vermek iÃ§in GPT-4 Modelini kullanÄ±yoruz.\nAyarlamarlÄ±nÄ±zÄ± kendi api anahtarÄ±nÄ±za gÃ¶re \nKonfigure edin\n",
        "height": 800,
        "width": 800,
        "color": 6
      },
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        -640,
        -360
      ],
      "id": "9db32204-0c43-4ab3-9c08-e86e2b8cd8cf",
      "name": "Sticky Note3"
    },
    {
      "parameters": {
        "content": "## MÃ¼ÅŸteri Duygu Analizi & AkÄ±llÄ± Cevap TaslaÄŸÄ± Otomasyonu\n\nBu n8n workflowâ€™u, mÃ¼ÅŸteri destek sÃ¼reÃ§lerini hÄ±zlandÄ±rmak ve kaliteyi artÄ±rmak amacÄ±yla tasarlandÄ±. Gelen her yeni Zendesk destek talebi;\n\n- **Google Gemini** tarafÄ±ndan duygu, niÅŸan (soru, ÅŸikayet, talep vb.), aciliyet ve kategori bazÄ±nda otomatik olarak analiz edilir.  \n- Analiz sonuÃ§larÄ±na gÃ¶re **OpenAI GPT-4** modeli, empatik, profesyonel ve Ã§Ã¶zÃ¼m odaklÄ± mÃ¼ÅŸteri yanÄ±t taslaklarÄ± oluÅŸturur.  \n- Taslaklar **Slack**â€™te destek ekibine gÃ¶nderilir, ekip onaylarsa Zendesk Ã¼zerinden mÃ¼ÅŸteriye otomatik olarak iletilir.  \n- Onaylanmayan veya revize gereken cevaplar iÃ§in tekrar GPT-4 ile iyileÅŸtirilmiÅŸ taslaklar hazÄ±rlanÄ±r ve sÃ¼reÃ§ baÅŸtan devam eder.  \n- YÃ¼ksek Ã¶ncelikli veya negatif duygu taÅŸÄ±yan talepler Slackâ€™te acil mÃ¼dahale kanallarÄ±na otomatik olarak yÃ¶nlendirilir.\n\nBu sayede mÃ¼ÅŸteri memnuniyeti yÃ¼kselir, destek ekibinin iÅŸ yÃ¼kÃ¼ azalÄ±r, sÃ¼reÃ§ler hem hÄ±zlÄ± hem kontrollÃ¼ yÃ¼rÃ¼r. Kodlama bilgisi gerektirmeden, tamamen no-code platformu Ã¼zerinde kurulu, Ã¶lÃ§eklenebilir ve kolay adapte edilebilir bir yapay zekÃ¢ destekli destek otomasyonudur.\n\n",
        "height": 600,
        "width": 580
      },
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        920,
        -300
      ],
      "id": "7531c290-269b-44da-854e-083a9eb3e736",
      "name": "Sticky Note4"
    },
    {
      "parameters": {
        "content": "## HazÄ±rlayan\n**Mustafa Kemal Ã‡Ä±ngÄ±l** \n\n[Github HesabÄ±m](https://github.com/MustafaKemal0146/)\n[Linkedin HesabÄ±m](https://www.linkedin.com/in/mustafakemalcingil/)\n[KiÅŸisel Web Sitem](https://mustafakemalcingil.site/)",
        "width": 180,
        "color": 7
      },
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        280,
        -40
      ],
      "id": "62429b4c-23ff-4b4a-9857-b520daf704f1",
      "name": "Sticky Note5"
    }
  ],
  "pinData": {},
  "connections": {
    "Parse Analysis": {
      "main": [
        [
          {
            "node": "GPT-4 - Cevap TaslaÄŸÄ±",
            "type": "main",
            "index": 0
          },
          {
            "node": "Ã–ncelik KontrolÃ¼",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "GPT-4 - Cevap TaslaÄŸÄ±": {
      "main": [
        [
          {
            "node": "Slack - Taslak Bildirimi",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Slack - Taslak Bildirimi": {
      "main": [
        [
          {
            "node": "Onay KontrolÃ¼",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Onay KontrolÃ¼": {
      "main": [
        [
          {
            "node": "Zendesk - OnaylanmÄ±ÅŸ Cevap",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Slack - Red Bildirimi",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Zendesk - OnaylanmÄ±ÅŸ Cevap": {
      "main": [
        [
          {
            "node": "Slack - BaÅŸarÄ± Bildirimi",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Slack - Red Bildirimi": {
      "main": [
        [
          {
            "node": "GPT-4 - Revize Taslak",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "GPT-4 - Revize Taslak": {
      "main": [
        [
          {
            "node": "Slack - Revize Bildirimi",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Webhook - Onay Sistemi": {
      "main": [
        [
          {
            "node": "Process Approval",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Process Approval": {
      "main": [
        [
          {
            "node": "Onay KontrolÃ¼",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Ã–ncelik KontrolÃ¼": {
      "main": [
        [
          {
            "node": "Slack - Acil Bildirim",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Zendesk New Ticket": {
      "main": [
        [
          {
            "node": "Parse Analysis",
            "type": "main",
            "index": 0
          }
        ]
      ]
    }
  },
  "active": false,
  "settings": {
    "executionOrder": "v1"
  },
  "versionId": "5304069b-6596-4964-84a4-da6868862411",
  "meta": {
    "instanceId": "490a4c7dba67af614bc50a0e5bfcb2c73c718bf4c1089201c886c04c62578fc5"
  },
  "id": "vPWNC67b9NExpoKi",
  "tags": []
}